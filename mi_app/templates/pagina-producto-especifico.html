{% extends 'base.html' %}

{% block container %}
<!DOCTYPE html>
<html lang="en">

<head>
    <title>{{producto["nombre"]}}</title>
    <style>
        /* En pantallas pequeñas, los botones de la navbar ocuparán toda la anchura */
        @media (max-width: 991px) {
            .nav-item button {
                width: 90%;
                margin: 5px 0;
            }
            .barraBusqueda {
                width: 90%;
                margin-right: 6%;
            }
        }
    </style>
</head>

<body>
    <!-- Navbar (barra de navegación) -->
    <nav class="navbar navbar-expand-lg">
        <div class="container-fluid">
            <!-- Logo en el navbar -->
            <a class="navbar-brand fs-3" href="{{ url_for('catalog.home') }}">Logo</a>
            <!-- Botón "hamburguesa" para pantallas pequeñas -->
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mynavbar">
                <span class="navbar-toggler-icon"></span>
            </button>
            <!-- Menú del navbar que se colapsa en pantallas pequeñas -->
            <div class="collapse navbar-collapse" id="mynavbar">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a href="{{ url_for('catalog.home', page=1) }}"><button class="btn btn-light btn-sm fs-6 ms-3" type="button">Menú</button></a>
                    </li>
                    <li class="nav-item">
                        <a href="{{ url_for('catalog.productos') }}"><button class="btn btn-primary btn-sm fs-6 ms-3" type="button">Productos</button></a>
                    </li>
                    {% if current_user.is_authenticated %}
                    <li class="nav-item">
                        <a href="{{ url_for('catalog.carrito', user=current_user.nombre )}}"><button class="btn btn-light btn-sm fs-6 ms-3" type="button">Carrito</button></a>
                    </li>
                    <li class="nav-item">
                        <a href="{{ url_for('catalog.favs', user=current_user.nombre  )}}"><button class="btn btn-light btn-sm fs-6 ms-3" type="button">Favoritos</button></a>
                    </li>
                    {% endif %}
                    <li class="nav-item">
                        
                    </li>
                </ul>
                <!-- Barra de búsqueda -->
                <form class="d-flex ms-auto barraBusqueda">
                    <input class="form-control form-control-sm me-2" type="search" placeholder="Buscar"
                        aria-label="Search">
                    <button class="btn btn-primary btn-sm" type="submit">Buscar</button>
                </form>
                <!-- Usuario y moneda en pantallas grandes -->
                {% if current_user.is_authenticated %}
                    <div class="text-light fs-5 ms-3 d-none d-md-block">{{ current_user.nombre }}<span id="username"></span></div>
                    <a href="{{ url_for('catalog.logout') }}">Click here to logout</a>
                {% else %}
                    <a href="{{ url_for('catalog.login') }}"><button class="btn btn-light btn-sm fs-6 ms-3" type="button">Iniciar Sesión</button></a> 
                    <a href="{{ url_for('catalog.register') }}"><button class="btn btn-light btn-sm fs-6 ms-3" type="button">Registrarse</button></a>
                {% endif %}
                
                <div class="ms-3 d-none d-md-block">
                    <select class="form-select form-select-sm" id="currencySelector">
                        <option value="eur">EUR (€)</option>
                        <option value="usd">USD ($)</option>
                        <option value="gbp">GBP (£)</option>
                    </select>
                </div>
            </div>
        </div>
    </nav>

    <!-- Contenedor principal -->
    <div class="container-fluid">
        <h1>{{producto["nombre"]}}</h1>
        <div class="row">
            <div class="col-sm-12 col-md-6 col-lg-8">
                <div class="container-fluid">
                    <div id="carouselExampleIndicators" class="carousel slide carousel-fade" data-bs-ride="carousel">
                        <div class="carousel-indicators">
                            <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0"
                                class="active" aria-current="true" aria-label="Slide 1"></button>
                            <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1"
                                aria-label="Slide 2"></button>
                            <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2"
                                aria-label="Slide 3"></button>
                        </div>
                        <div class="carousel-inner">
                            <div class="carousel-item active">
                                <img src="{{url_for('static', filename=producto['imagen'])}}"
                                    class="d-block w-100" alt="...">
                            </div>
                            <div class="carousel-item">
                                <img src="{{url_for('static', filename=producto['imagen'])}}"
                                    class="d-block w-100" alt="...">
                            </div>
                            <div class="carousel-item">
                                <img src="{{url_for('static', filename=producto['imagen'])}}"
                                    class="d-block w-100" alt="...">
                            </div>
                        </div>
                        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators"
                            data-bs-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Anterior</span>
                        </button>
                        <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators"
                            data-bs-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Siguiente</span>
                        </button>
                    </div>
                </div>
            </div>
            <div class="col-sm-12 col-md-6 col-lg-4">
                <div class="container">
                    <div class="row">
                        <div class="container-fluid" id="imagen">
                            <img src="https://cdn.pixabay.com/photo/2017/04/04/18/09/video-game-console-2202582_960_720.jpg"
                                style="width: 150px; height: auto;" alt="Ejemplo de imagen responsiva">
                        </div>
                        <div class="container" id="descripcion">
                            <strong>{{producto["descripcion"]}}</strong>
                        </div>
                        <div class="container" id="datos">
                            <p>Categoría: {{categoria["nombre"]}} </p>
                            {% if producto["disponibilidad"] == true %}
                                <p>Este producto esta en stock</p>
                            {% else %}
                                <p>Este producto esta fuera de stock</p>
                            {% endif %}
                            <p>Desarrolladora: {{producto["desarrolladora"]}} </p>
                            <p>{{producto["precio"]}}€</p>
                            {% if current_user.is_authenticated %}
                            <a href="{{url_for('catalog.addCarrito', idUsuario=current_user.idUsuario, idProducto=producto['idProducto'])}}"><button type="button" class="btn btn-primary btn-sm">Añadir al carrito</button></a>
                            {% else %}
                            <a href="{{url_for('catalog.login')}}"><button type="button" class="btn btn-primary btn-sm">Añadir al carrito</button></a>
                            {% endif %}
                            
                        </div>
                    </div>
                    <br>
                    {% for clave in producto["palabrasClave"] %}
                        <button type="button" class="btn btn-secondary btn-sm"> {{clave}}</button>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
    </div>
    </div>
    </div>
</body>

</html>
{% endblock %}