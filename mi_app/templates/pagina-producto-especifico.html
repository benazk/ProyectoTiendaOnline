{% extends 'base.html' %}

{% block container %}
<!DOCTYPE html>
<html lang="en">

<head>
    <title>{{producto["nombre"]}}</title>
    <style>
        /* En pantallas pequeñas, los botones de la navbar ocuparán toda la anchura */
        @media (max-width: 991px) {
            .nav-item button {
                width: 90%;
                margin: 5px 0;
            }
            .barraBusqueda {
                width: 90%;
                margin-right: 6%;
            }
        }
    </style>
</head>

<body style="background-color: rgb(136, 115, 136);">
    <!-- Contenedor principal -->
    <div class="container-fluid">
        <h1>{{producto["nombre"]}}</h1>
        <div class="row">
            <div class="col-sm-12 col-md-6 col-lg-8">
                <div class="container-fluid">
                    <div id="carouselExampleIndicators" class="carousel slide carousel-fade" data-bs-ride="carousel">
                        <div class="carousel-indicators">
                            <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0"
                                class="active" aria-current="true" aria-label="Slide 1"></button>
                            <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1"
                                aria-label="Slide 2"></button>
                            <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2"
                                aria-label="Slide 3"></button>
                        </div>
                        <div class="carousel-inner">
                            <div class="carousel-item active">
                                <img src="{{url_for('static', filename=producto['imagen'])}}"
                                    class="d-block w-100" alt="...">
                            </div>
                            <div class="carousel-item">
                                <img src="{{url_for('static', filename=producto['imagen'])}}"
                                    class="d-block w-100" alt="...">
                            </div>
                            <div class="carousel-item">
                                <img src="{{url_for('static', filename=producto['imagen'])}}"
                                    class="d-block w-100" alt="...">
                            </div>
                        </div>
                        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators"
                            data-bs-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Anterior</span>
                        </button>
                        <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators"
                            data-bs-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Siguiente</span>
                        </button>
                    </div>
                </div>
            </div>
            <div class="col-sm-12 col-md-6 col-lg-4">
                <div class="container">
                    <div class="row">
                        <div class="container-fluid" id="imagen">
                            <img src="https://cdn.pixabay.com/photo/2017/04/04/18/09/video-game-console-2202582_960_720.jpg"
                                style="width: 150px; height: auto;" alt="Ejemplo de imagen responsiva">
                        </div>
                        <div class="container" id="descripcion">
                            <strong>{{producto["descripcion"]}}</strong>
                        </div>
                        <div class="container" id="datos">
                            <p>Categoría: {{categoria["nombre"]}} </p>
                            {% if producto["disponibilidad"] == true %}
                                <p>Este producto esta en stock</p>
                            {% else %}
                                <p>Este producto esta fuera de stock</p>
                            {% endif %}
                            <p>Desarrolladora: {{producto["desarrolladora"]}} </p>
                            <p>{{producto["precio"]}}€</p>
                            {% if current_user.is_authenticated %}
                                {% if existing_prod == none %}
                                    <a href="{{ url_for('catalog.add_carrito', idUser=current_user.idUsuario, idProd=producto['idProducto']) }}"><button type="button" class="btn btn-primary btn-sm">Añadir al carrito</button></a>
                                {% else %}
                                    <button type="button" class="btn btn-gray btn-sm" style="border: 1px solid black;">Producto ya en el carrito</button>
                                    {% endif %}
                            {% else %}
                            <a href="{{url_for('catalog.login')}}"><button type="button" class="btn btn-primary btn-sm">Añadir al carrito</button></a>
                            {% endif %}
                            {% if current_user.is_authenticated %}
                                {% if existing_fav == none %}
                                    <a href="{{ url_for('catalog.add_favs', idUser=current_user.idUsuario, idProd=producto['idProducto']) }}">ADD</a>
                                {% else %}
                                    Ya te gusta esto
                                {% endif %}
                            {% endif %}
                            
                        </div>
                    </div>
                    <br>
                    {% for clave in producto["palabrasClave"] %}
                        <button type="button" class="btn btn-secondary btn-sm"> {{clave}}</button>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
    </div>
    </div>
    </div>
</body>

</html>
{% endblock %}